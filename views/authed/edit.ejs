<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = 'stylesheet' href = '/css/reset.css'>
    <link rel = 'stylesheet' href = '/css/normalize.css'>
    <link rel = 'stylesheet' href = '/css/style.css'>
    <link rel = 'stylesheet' href = '/css/add.css'>
    <title>Edit Servant</title>
</head>
<body>
    <header class = 'flex column alignItems justifyContent header'>
        <div class = 'banner'></div>

        <nav class = 'flex'>
            <li><a href = '/user'><h2 class = 'logo'>Fate Grand Order</h2></a></li>
    
                <ul class = 'flex row'>
                    <li><a href = '/user'>Home</a></li>
                    <li><a href = '/user/add'>Add Servant</a></li>
                    <li><a href = '/user/servants'>See Servant Data</a></li>
                    <li><a href = '/user/gameplay'>Gameplay</a></li>
                    <li><a href = '/user/simulator'>Simulator</a></li>
                    <li><a href = '/auth/logout'>Logout</a></li>

                </ul>
        </nav>
    </header>


<section class = 'flex justifyContent column alignItems section'>
    <div class = 'flex column alignItems data'>
        <h1 class = 'flex justifyContent'>Edit Servant</h1>
        <span>Enter in information regarding Fate Grand Servants below and submit the data once everything is filled out.</span>

        <span>Use the link below to access the added servant data API</span>
        <code><pre>https://fgo-app.herokuapp.com/api/servants</pre></code>
    </div>
        <h1 class = 'flex justifyContent'>Choose Servant to Add</h1>

        <div class = 'flex filter'>
            <button class = 'button' id = 'letter'>Filter By Starting Letter</button>
            <button class = 'button' id = 'servantClass'>Filter By Servant Class</button>
    
        </div>
    
    
        <div class = 'buttons flex button hidden'>
            <% let alphabet = 'abcdefghijklmnopqrstuvwxyz' %>
            <% for(let i = 0;i < alphabet.length; i++) { %>
           <button class = 'button filter-<%= alphabet[i] %>'><%= alphabet[i] %></button>
            <% } %>
        </div>

    
        <% let servantClass = ['saber','archer','lancer','rider','assassin','caster','shielder','avenger','alter ego','ruler','berserker'] %>
    
        
        <button class = 'button' id = 'clear'>Clear Filters</button>

    
                <div class="flex button buttons servantClass hidden">
        
    
    
                    <% servantClass.forEach((ele,i)=> { %>
                
                        <% let removeSpace = ele.split('').map(ele=> { %>
                            <% if(ele == ' '){ %>
                                <% return '' %>
                            <% } else{ %>
                                <% return ele %>
                            <% } %>
                            <% }).join('') %>
                
                     <button class = 'button <%= removeSpace %> '><%= ele%></button>
                   <%  } ) %>
                </div>
                
                
                <div class="flex button justifyContent servantRarity">
                    <% for(let i = 0; i < 6; i ++){ %>
                        <button class="button rarity_<%=i %>"><%= i%></button>
                    <% } %>
                </div>
            
            
                    <article id = 'servant' class = 'flex button justifyContent alignItems'>
            


                        <% let servantName = info.servant[0].name.split('').map(ele=>{ %>
                            <% if(ele !== ' ' && ele !== '.' && ele !== '-' && ele !== '(' && ele !== ')' && ele !== "'" && ele !== '&' && ele !== '=' && ele !== "\"" && ele !== "\/"){ %>
                          <% return ele %>
                           <%  }else{ %>
                             <%  return '' %>
                            <% } %>
                          <% }).join('') %>


                

                          <% if(choose[0].servantIndex != -1 ){ %>
                            
                    
                          <form action = '/user/choose/<%= info._id %>?_method=PUT' method = 'POST' class = "form <%= servantName %>_<%= info.servant[0].className %> <%= servantName %><%= info.servant[0].className %>rarity_<%= info.servant[0].rarity %>">
                            <button class = ' selected button' type = 'submit'><img src = '<%= ascension[info.index].servant[0]['1'] %>'></button>
                        <input value = '<%= info.index %>' class = 'hidden' type="text" name = 'servantIndex'>
                          </form>
            
            
                        <% for(let i = 0; i< data.length; i++) { %>
                            <% if (i != info.index) { %>
                                <form action = '/user/choose/<%= data[i]._id %>?_method=PUT' method = 'POST' class = "form <%= servantName %>_<%= data[i].servant[0].className %> <%= servantName %><%= data[i].servant[0].className %>rarity_<%= data[i].servant[0].rarity %>">
                                    <button class = 'button' type = 'submit'><img src = '<%= ascension[i].servant[0]['1'] %>'></button>
                                <input value = '<%= i %>' class = 'hidden' type="text" name = 'servantIndex'>
                                </form>
                                <% } %>
                
                        <% } %>

                       
                    </article>
            
            
            
            
                    <form action = '/user/details/<%= info._id %>?_method=PUT' method = 'POST' class = 'flex alignItems column servant button'>

                        <input value = '<%= info.index  %>' class = 'hidden' type="text" name ='index'>

            
                    <div class ='flex alignItems column status'>
            
                        <% if(info.status === 'public') { %>
                    <h2>Status:</h2>
                    <select name="status">
                        <option value="public" selected>Public</option>
                        <option value="private">Private</option>
                    </select>
                    <% } else if(info.status === 'private') { %>
                        <h2>Status:</h2>
                        <select name="status">
                            <option value="public">Public</option>
                            <option value="private" selected>Private</option>
                        </select>
                        <% } %>
                        </div>
            
                    <div class ='flex alignItems column'>
                            <h2>Pick Ascension Art to Show:</h2>
                            <% if(info.ascension == 'default') { %>
                            <select name="ascension">
                                <option value="default" selected>Default Based on Level</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                            <% } else if(info.ascension == '1') { %>
                                <select name="ascension">
                                    <option value="default">Default Based on Level</option>
                                    <option value="1" selected>1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            <% } else if(info.ascension == '2') { %>
                                <select name="ascension">
                                    <option value="default">Default Based on Level</option>
                                    <option value="1">1</option>
                                    <option value="2" selected>2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            <% } else if(info.ascension == '3') { %>
                                <select name="ascension">
                                    <option value="default">Default Based on Level</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3" selected>3</option>
                                    <option value="4">4</option>
                                </select>
                            <% } else if(data.ascension == '4') { %>
                                <select name="ascension">
                                    <option value="default">Default Based on Level</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4" selected>4</option>
                                </select>
                            <% } %>
                    </div> 
            
                        <div class="flex justifyContent alignItems fgo">
                            <h2>Name: </h2><h2 id="servantName"><%= info.servant[0].name %></h2>
                            <h2>Rarity: </h2><h2 id= 'servantRarity'><%= info.servant[0].rarity %></h2>
                            <h2>Class: </h2><h2 id= 'servantClass'><%= info.servant[0].className %></h2>
                            <h2>Servant Level: </h2>
                            <input value = '<%= info.level %>' name = 'level' type="number" max="120" min = '1' id = 'level'>
                        </div>
            
            
            
                    <article class = 'flex justifyContent alignItems button'>
                        <img id = 'image' src = '<%= ascension[info.index].servant[0]['1']  %>'>
                        <div class="flex alignItems justifyContent column">
                            
            
            
                            <div class="flex justifyContent alignItems column">
                            <h2>Servant Skills:</h2>
                            <div class="flex justifyContent">
                                <div class="flex column alignItems">
                                <img id = 'skill1' src="<%= skill[info.index].servant[0].skills.skills1.icon  %>" alt="">
                                <h2>Level</h2>
                                <input value = '<%= info.skill1 %>' name = 'skill1' type="number" max="10" min = '1' step = '1'>
                            </div>
                            <div class="flex column alignItems">
                                <img id = 'skill2' src="<%= skill[info.index].servant[0].skills.skills2.icon  %>" alt="">
                                <h2>Level</h2><input value = '<%= info.skill2 %>' name = 'skill2' type="number" max="10" min = '1' step = '1'>
                             </div>
                             <div class="flex column alignItems">
            
                                <img id = 'skill3' src="<%= skill[info.index].servant[0].skills.skills3.icon  %>" alt="">
                                <h2>Level</h2><input value = '<%= info.skill3 %>' name = 'skill3' type="number" max="10" min = '1' step = '1'>
                            </div>
                        </div>
            
                       
                        <div class="flex justifyContent alignItems column">
            
                            <h2>Append Skills:</h2>
                            <div class="flex justifyContent">
                                <div class="flex column alignItems">
                                    <img id = 'skill2' src="<%= skill[info.index].servant[0].appendPassive.appendPassive0.icon  %>" alt="">
                                <h2>Level</h2><input value = '<%= info.appendSkill1 %>' name = 'appendSkill1' type="number" max="10" min = '0'>
                            </div>
                            <div class="flex column alignItems">
                                <img id = 'appendSkill2' src="<%= skill[info.index].servant[0].appendPassive.appendPassive2.icon  %>" alt="">
                                <h2>Level</h2><input value = '<%= info.appendSkill2 %>' name = 'appendSkill2' type="number" max="10" min = '0'>
                             </div>
                             <div class="flex column alignItems">
            
                                <img id = 'appendSkill3' src="<%= skill[info.index].servant[0].appendPassive.appendPassive3.icon  %>" alt="">
                                <h2>Level</h2><input value = '<%= info.appendSkill3 %>' name = 'appendSkill3' type="number" max="10" min = '0'>
                            </div>
                            </div>
                                
                            </div>
                        </div>


                        <% } else { %>

                            
                            <form action = '/user/choose/<%= info._id %>?_method=PUT' method = 'POST' class = "form <%= servantName %>_<%= info.servant[0].className %> <%= servantName %><%= info.servant[0].className %>rarity_<%= info.servant[0].rarity %>">
                              <button class = ' selected button' type = 'submit'><img src = '<%= ascension[choose[0].servantIndex].servant[0]['1'] %>'></button>
                          <input value = '<%= choose[0].servantIndex %>' class = 'hidden' type="text" name = 'servantIndex'>
                            </form>
              
              
                          <% for(let i = 0; i< data.length; i++) { %>
                              <% if (i != choose[0].servantIndex) { %>
                                  <form action = '/user/choose/<%= data[i]._id %>?_method=PUT' method = 'POST' class = "form <%= servantName %>_<%= data[i].servant[0].className %> <%= servantName %><%= data[i].servant[0].className %>rarity_<%= data[i].servant[0].rarity %>">
                                      <button class = 'button' type = 'submit'><img src = '<%= ascension[i].servant[0]['1'] %>'></button>
                                  <input value = '<%= i %>' class = 'hidden' type="text" name = 'servantIndex'>
                                  </form>
              <% } %>
  
                          <% } %>


                        </article>
            
            
            
            
                        <form action = '/user/details/<%= info._id %>?_method=PUT' method = 'POST' class = 'flex alignItems column servant button'>
    
                            <input value = '<%= choose[0].servantIndex  %>' class = 'hidden' type="text" name ='index'>
    
                
                        <div class ='flex alignItems column status'>
                
                            <% if(info.status === 'public') { %>
                        <h2>Status:</h2>
                        <select name="status">
                            <option value="public" selected>Public</option>
                            <option value="private">Private</option>
                        </select>
                        <% } else if(info.status === 'private') { %>
                            <h2>Status:</h2>
                            <select name="status">
                                <option value="public">Public</option>
                                <option value="private" selected>Private</option>
                            </select>
                            <% } %>
                            </div>
                
                        <div class ='flex alignItems column'>
                                <h2>Pick Ascension Art to Show:</h2>
                                <% if(info.ascension == 'default') { %>
                                <select name="ascension">
                                    <option value="default" selected>Default Based on Level</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                                <% } else if(info.ascension == '1') { %>
                                    <select name="ascension">
                                        <option value="default">Default Based on Level</option>
                                        <option value="1" selected>1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                <% } else if(info.ascension == '2') { %>
                                    <select name="ascension">
                                        <option value="default">Default Based on Level</option>
                                        <option value="1">1</option>
                                        <option value="2" selected>2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                    </select>
                                <% } else if(info.ascension == '3') { %>
                                    <select name="ascension">
                                        <option value="default">Default Based on Level</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3" selected>3</option>
                                        <option value="4">4</option>
                                    </select>
                                <% } else if(data.ascension == '4') { %>
                                    <select name="ascension">
                                        <option value="default">Default Based on Level</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4" selected>4</option>
                                    </select>
                                <% } %>
                        </div> 
                
                            <div class="flex justifyContent alignItems fgo">
                                <h2>Name: </h2><h2 id="servantName"><%= info.servant[0].name %></h2>
                                <h2>Rarity: </h2><h2 id= 'servantRarity'><%= info.servant[0].rarity %></h2>
                                <h2>Class: </h2><h2 id= 'servantClass'><%= info.servant[0].className %></h2>
                                <h2>Servant Level: </h2>
                                <input value = '<%= info.level %>' name = 'level' type="number" max="120" min = '1' id = 'level'>
                            </div>
                
                
                
                        <article class = 'flex justifyContent alignItems button'>
                            <img id = 'image' src = '<%= ascension[choose[0].servantIndex].servant[0]['1']  %>'>
                            <div class="flex alignItems justifyContent column">
                                
                
                
                                <div class="flex justifyContent alignItems column">
                                <h2>Servant Skills:</h2>
                                <div class="flex justifyContent">
                                    <div class="flex column alignItems">
                                    <img id = 'skill1' src="<%= skill[choose[0].servantIndex].servant[0].skills.skills1.icon  %>" alt="">
                                    <h2>Level</h2>
                                    <input value = '<%= info.skill1 %>' name = 'skill1' type="number" max="10" min = '1' step = '1'>
                                </div>
                                <div class="flex column alignItems">
                                    <img id = 'skill2' src="<%= skill[choose[0].servantIndex].servant[0].skills.skills2.icon  %>" alt="">
                                    <h2>Level</h2><input value = '<%= info.skill2 %>' name = 'skill2' type="number" max="10" min = '1' step = '1'>
                                 </div>
                                 <div class="flex column alignItems">
                
                                    <img id = 'skill3' src="<%= skill[choose[0].servantIndex].servant[0].skills.skills3.icon  %>" alt="">
                                    <h2>Level</h2><input value = '<%= info.skill3 %>' name = 'skill3' type="number" max="10" min = '1' step = '1'>
                                </div>
                            </div>
                
                           
                            <div class="flex justifyContent alignItems column">
                
                                <h2>Append Skills:</h2>
                                <div class="flex justifyContent">
                                    <div class="flex column alignItems">
                                        <img id = 'skill2' src="<%= skill[choose[0].servantIndex].servant[0].appendPassive.appendPassive0.icon  %>" alt="">
                                    <h2>Level</h2><input value = '<%= info.appendSkill1 %>' name = 'appendSkill1' type="number" max="10" min = '0'>
                                </div>
                                <div class="flex column alignItems">
                                    <img id = 'appendSkill2' src="<%= skill[choose[0].servantIndex].servant[0].appendPassive.appendPassive2.icon  %>" alt="">
                                    <h2>Level</h2><input value = '<%= info.appendSkill2 %>' name = 'appendSkill2' type="number" max="10" min = '0'>
                                 </div>
                                 <div class="flex column alignItems">
                
                                    <img id = 'appendSkill3' src="<%= skill[choose[0].servantIndex].servant[0].appendPassive.appendPassive3.icon  %>" alt="">
                                    <h2>Level</h2><input value = '<%= info.appendSkill3 %>' name = 'appendSkill3' type="number" max="10" min = '0'>
                                </div>
                                </div>
                                    
                                </div>
                            </div>
                          <% } %>

        </article>

        <input type="text" name="servantIndex" value = '-1' class = 'hidden'>

        <button type = 'submit' class = 'button'>Submit</button>
    </form>


     
</section>


<footer class = 'flex column alignItems' id = 'footer'>
    <section class = 'flex icons'>
    <i class="fa-brands fa-facebook-f"></i>
    <i class="fa-brands fa-instagram"></i>
    <i class="fa-brands fa-twitter"></i>
    <i class="fa-brands fa-github"></i>
    <i class="fa-solid fa-envelope"></i>
    </section>
      <nav>
    
          <ul class = 'flex justifyContent'>

            <li><a href = '/user'>Home</a></li>
            <li><a href = '/user/add'>Add Servant</a></li>
            <li><a href = '/user/servants'>See Servant Data</a></li>
            <li><a href = '/user/gameplay'>Gameplay</a></li>
            <li><a href = '/user/simulator'>Simulator</a></li>
            <li><a href = '/auth/logout'>Logout</a></li>
            </ul>
     </nav>

     <small>FGO app &copy; choir Design: HTML5 UP</small>
    
  </footer>

  <script src="/js/add.js"></script>
  <script src="https://kit.fontawesome.com/d0e0071c1c.js" crossorigin="anonymous"></script>
</body>
</html>